<!--
  ~ Copyright (C) 2024  Manh Tu VU
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->

<div class="form-group" *ngIf="!activatedMatching">
	<label>No similarity matrix found!</label>

	<button type="button" class="btn btn-success btn-sm mt-2" (click)="createMatching()">Create matching</button>
</div>
<form  *ngIf="activatedMatching">

	<div ngbDropdown class="d-flex align-items-center" container="body">

		<div class="input-group input-group-sm mb-1">
			<span class="input-group-text" id="basic-addon3">Matching: </span>
			<button type="button" class="btn btn-outline-success btn-sm flex-grow-1" id="dropdownForm1" ngbDropdownToggle>
				{{activatedMatching.name}}
			</button>
		</div>

		<div ngbDropdownMenu aria-labelledby="dropdownForm1">
			<div class="overflow-auto">
				<table class="table table-sm p-3">
					<tbody>
					<tr *ngFor="let matching of matchings" >
						<td class="ps-2 pe-5">{{matching.name}}</td>
						<td>
							<div class="text-right d-flex justify-content-end">
								<button type="button" class="btn btn-outline-success btn-sm me-1" (click)="setActivatedMatching(matching)">Select</button>
								<button type="button" class="btn btn-outline-danger btn-sm" (click)="deleteMatching(matching)">X</button>
							</div>
						</td>
					</tr>
					</tbody>
				</table>
			</div>

			<div class="text-right d-flex justify-content-end">
				<button type="button" class="btn btn-outline-success btn-sm me-2" (click)="createMatching()" >Create matching</button>
			</div>
		</div>
	</div>

	<select class="form-control form-control-sm mb-1" [formControl]="category" (change)="getThumbnails()">
		<option *ngFor="let category of categories" [selected]="category.isActivated" value="{{category.id}}">{{category.name}}</option>
	</select>
</form>

<div class="container">
	<app-thumbnail (openImage)="openImage.emit($event)" *ngFor="let thumbnail of thumbnails" [thumbnail]="thumbnail"></app-thumbnail>
</div>